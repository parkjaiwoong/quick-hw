# 퀵HW 서비스 구조 문서

## 1. 서비스 정체성

**"우리는 퀵 기사와 고객(또는 업체)을 연결해주되, 물품 사고(파손·분실)는 플랫폼 보험으로 처리해주는 연결 플랫폼이다."**

### 책임 범위
- ⭕ 요금 자동 산정 (카카오픽 기준)
- ❌ 인적 사고 책임
- ⭕ 물품 사고 일부 책임 (명확한 한도 내)

---

## 2. 전체 웹 구조

### 4개 주요 영역
1. **고객용 화면** - 배송 요청, 기사 연결, 문의/사고 접수
2. **기사용 화면** - 요청 확인, 배송 수락, 이력 관리
3. **관리자/CS 화면** - 주문 로그, 사고 처리, CS 응대
4. **공통 안내/약관/신뢰 영역** - 약관, 보험 안내, 법적 고지

---

## 3. 고객용 화면 구성

### ① 메인 화면 (`/customer`)
- **메인 메시지**: "가까운 퀵 기사 빠르게 연결", "물품 파손·분실 시 보험 처리"
- **법적 고지**: "본 플랫폼은 운송 당사자가 아닌 중개 플랫폼입니다"
- **기사 연결 요청 버튼**
- **통계**: 전체/대기중/진행중/완료 배송 수
- **문의/사고 접수 링크**

### ② 배송 요청 화면 (`/customer/new-delivery`)
- **출발지/도착지 입력**
- **물품 종류 선택**: 서류 / 소형 / 중형 / 대형 / 기타
- **"요금은 카카오픽 기준으로 자동 산정" 문구 표시**
- **"기사 연결 요청" 버튼**

### ③ 기사 추천/연결 화면 (`/customer/drivers/[id]`)
- **근처 기사 리스트** (3~5명)
- **기사 프로필**:
  - 차량 종류
  - 보험 가입 여부 (플랫폼 보험 포함 여부)
  - 최근 운행 수
  - 평점
  - 거리
- **"연결 요청" 버튼**
- **연결 시**: "기사와 통화하세요" 안내

### ④ 고객 문의 / 사고 접수 화면
- **일반 문의** (`/customer/inquiry`)
  - 제목, 내용 입력
  - "접수 후 1영업일 내 안내" 자동 메시지
  
- **물품 사고 접수** (`/customer/accident`)
  - 배송 선택 (선택사항)
  - 사고 유형: 파손 / 분실
  - 사진 업로드
  - 간단 설명
  - "접수 후 1영업일 내 안내" 자동 메시지

---

## 4. 기사용 화면 구성

### ① 기사 가입 / 인증 (`/auth/signup` - role=driver)
- **기본 정보**: 이름, 이메일, 전화번호, 비밀번호
- **차량 정보**: 차량 종류, 차량 번호, 면허 번호
- **보험 동의 체크**: 플랫폼 보험 적용 범위 확인
- **약관 동의**: 서비스 이용약관 동의

### ② 요청 확인 화면 (`/driver`)
- **근처 요청 리스트**
- **물품 종류 / 거리 표시**
- **"요금은 자동 산정" 문구**
- **"수락" 버튼**
- **수락 시**: 고객 연락처 공개 안내

### ③ 내 이력 / 사고 이력 (`/driver`)
- **운행 이력**: 최근 20건
- **사고 발생 여부**: 사고 건수 표시
- **보험 처리 상태**: 관리자 화면에서 확인

---

## 5. 관리자 / CS 화면 구성

### ① 주문 & 연결 로그 (`/admin/dispatch`)
- **누가 언제 누구와 연결됐는지** 표시
- **통화 여부**: 연결됨/미연결 표시
- **사고 발생 여부**: 정상/접수/조사중/해결 표시
- **법적 분쟁 대비 핵심 자료**

### ② 사고 처리 관리 (`/admin/accidents`)
- **접수 목록**: 모든 사고 접수 내역
- **증빙 확인**: 사고 설명, 사진 확인
- **보험 처리 여부 체크**: 보상 금액 입력
- **상태 변경**: 접수 → 조사중 → 해결 → 종료
- **플랫폼이 '관리자 역할'만 함** (운송 주체 아님)

### ③ CS 응대 화면 (`/admin/inquiries`)
- **문의 목록**: 고객 문의사항 목록
- **AI 1차 답변 기록**: 준비 중
- **필요 시 수동 응답**: 관리자가 직접 응답
- **경리 + CS 1명으로도 초기 운영 가능**

---

## 6. AI(LLM) 활용

### 절대 전면에 안 나옴 (보조 역할)

- **고객용**: FAQ 자동 답변, 사고 접수 후 안내 메시지
- **기사용**: 보험 범위 설명, 사고 시 행동 가이드
- **관리자용**: 문의 분류, 사고 유형 자동 정리

**판단 ❌ / 안내 ⭕**

---

## 7. 돈 흐름 & 운영 방식

### 요금
- **"요금은 카카오픽 기준 자동 산정"**
- 플랫폼은 요금 산정 기준을 제공합니다

### 수익
- 기사/업체 월 사용료 (향후 구현)
- 보험 포함 요금제 선택 가능 (향후 구현)

### 보험
- **"플랫폼 단체 물품 보험"**
- 보상 한도 명확히 표시 (약관 참조)

---

## 8. 반드시 웹에 들어가야 할 문구

### 법적 고지 (모든 화면에 표시)
- "본 플랫폼은 운송 당사자가 아닌 중개 플랫폼입니다."
- "인적 사고(상해·사망)는 기사 개인 책임입니다."
- "물품 보상은 약관에 명시된 범위 내에서만 가능합니다."

### 약관 / 사고 안내 페이지
- 항상 접근 가능하게 (`/terms`)
- Header에 링크 추가
- Footer에 링크 추가

---

## 9. 주요 파일 구조

### 고객용
- `app/customer/page.tsx` - 고객 메인 화면
- `app/customer/new-delivery/page.tsx` - 배송 요청
- `app/customer/drivers/[id]/page.tsx` - 기사 추천/연결
- `app/customer/inquiry/page.tsx` - 일반 문의
- `app/customer/accident/page.tsx` - 물품 사고 접수
- `components/customer/delivery-request-form.tsx` - 배송 요청 폼
- `components/customer/driver-recommendation-list.tsx` - 기사 추천 리스트

### 기사용
- `app/driver/page.tsx` - 기사 대시보드
- `components/driver/available-deliveries.tsx` - 대기 중 배송
- `components/driver/assigned-deliveries.tsx` - 진행 중 배송

### 관리자/CS
- `app/admin/page.tsx` - 관리자 메인
- `app/admin/dispatch/page.tsx` - 주문 & 연결 로그
- `app/admin/accidents/page.tsx` - 사고 처리 관리
- `app/admin/inquiries/page.tsx` - CS 응대
- `components/admin/accident-management-list.tsx` - 사고 관리 리스트

### 공통
- `app/terms/page.tsx` - 약관 및 안내
- `components/layout/header.tsx` - Header (약관 링크 포함)
- `components/layout/footer.tsx` - Footer (약관 링크 포함)

### Actions
- `lib/actions/auth.ts` - 인증 (회원가입, 로그인, 로그아웃)
- `lib/actions/deliveries.ts` - 배송 관련 (요금 자동 계산)
- `lib/actions/accident.ts` - 사고 접수 및 관리

---

## 10. 핵심 변경사항

### ✅ 완료된 작업
1. 요금 자동 계산 로직 적용
2. 법적 고지 문구 추가 (모든 화면)
3. 약관 페이지 생성
4. 고객 메인 화면 재구성
5. 기사 추천/연결 화면 생성
6. 문의/사고 접수 화면 분리
7. 기사 가입 시 차량 정보 및 보험 동의 추가
8. 관리자 화면 개선 (주문 로그, 사고 처리, CS 응대)
9. Footer 추가 (약관 링크)

### 🔄 향후 개선 사항
1. AI 답변 기능 구현
2. 기사 위치 추적 기능
3. 실시간 알림 시스템
4. 월 사용료 결제 시스템

---

## 11. 테스트 체크리스트

### 고객
- [ ] 회원가입 (고객)
- [ ] 배송 요청 (출발지/도착지, 물품 종류 선택)
- [ ] 기사 추천 화면 확인
- [ ] 기사 연결 요청
- [ ] 일반 문의 접수
- [ ] 물품 사고 접수

### 기사
- [ ] 회원가입 (기사 - 차량 정보, 보험 동의)
- [ ] 배송 요청 확인
- [ ] 배송 수락
- [ ] 운행 이력 확인

### 관리자
- [ ] 주문 & 연결 로그 확인
- [ ] 사고 처리 (상태 변경)
- [ ] CS 문의 확인

---

## 12. 중요 참고사항

1. **요금은 자동 계산** - 카카오픽 기준 적용
2. **법적 고지는 항상 표시** - 모든 화면에 명확히 표시
3. **보험은 물품 사고만** - 인적 사고는 기사 개인 책임
4. **약관은 항상 접근 가능** - Header와 Footer에 링크

